process PROD  = {

	source = HcalTBSource { 
		untracked vstring fileNames = { '/uscms_data/d1/jmmans/tutorial_data/HTB_011609.root' }
		untracked int32 maxEvents = 100
                untracked vstring streams = { 'HCAL_DCC020:20' }
	}
        module out = PoolOutputModule {
                 untracked string fileName = 'CaloTowers_HB_HO.root'
        }
	module unpacker = HcalRawToDigi {
                untracked int32 firstSample = 6
                untracked int32 lastSample = 15
                untracked int32 HcalFirstFED = 20
                untracked vint32 FEDs = { 20 }
		untracked bool FilterDataQuality = true
		untracked bool FilterAmplitude = true
		untracked int32 FilterAmpBegin = 4
		untracked int32 FilterAmpEnd = 7
		untracked double FilterAmpLevel = 22.0
		untracked string readoutMapSource = 'file:///uscms_data/d1/jmmans/tutorial_data/maps/hbho_ring12_tb04.txt'
	}

	module reco_hbhe = HcalSimpleReconstructor {
	       untracked int32 firstSample = 4
	       untracked int32 samplesToAdd = 4
	       untracked string Subdetector = 'HBHE'
	}

	module reco_ho = HcalSimpleReconstructor {
	       untracked int32 firstSample = 4
	       untracked int32 samplesToAdd = 4
	       untracked string Subdetector = 'HO'
	}

	module reco_hf = HcalSimpleReconstructor {
	       untracked int32 firstSample = 4
	       untracked int32 samplesToAdd = 3
	       untracked string Subdetector = 'HF'
	}

        module dumper = HcalRecHitDump { }

	module towermaker = CaloTowersCreator {
           double EBThreshold = 0.1 // GeV
           double EEThreshold = 0.1 // GeV
           double HcalThreshold = 0.1 // GeV
           double HBThreshold = 0.1 // GeV
           double HESThreshold = 0.1 // GeV
           double HEDThreshold = 0.1 // GeV
           double HOThreshold = 0.1 // GeV
           double HF1Threshold = 0.1 // GeV
           double HF2Threshold = 0.1 // GeV
	   double EBWeight = 1.0
	   double EEWeight = 1.0
	   double HBWeight = 1.0
	   double HESWeight = 1.0
	   double HEDWeight = 1.0
	   double HOWeight = 1.0
	   double HF1Weight = 1.0
	   double HF2Weight = 1.0
	   double EcutTower = 0.2 // GeV
	   double EBSumThreshold = 0.1 // GeV
	   double EESumThreshold = 0.1 // GeV
	   bool UseHO = true
        }

	module dumper_ct = CaloTowersDump  { }

	es_source = EmptyESSource { 
           string recordName = "IdealGeometryRecord"
           vuint32 firstValid = { 1 }
           bool iovIsRunNotTime = true 
        }
        es_module = HcalHardcodeGeometryEP {}
        es_module = CaloTowerHardcodeGeometryEP {}
        es_module = CaloGeometryBuilder {}

        es_module = HcalDbProducer {untracked string dbSource = "hardcode"}

	es_source es_0 = HcalDbSource {}

	es_source es_1 = EmptyESSource {untracked string recordName = "HcalPedestalsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }
	es_source es_2 = EmptyESSource {untracked string recordName = "HcalPedestalWidthsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }
	es_source es_3 = EmptyESSource {untracked string recordName = "HcalGainsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }
	es_source es_4 = EmptyESSource {untracked string recordName = "HcalGainWidthsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }

	path p = { unpacker, reco_ho, reco_hbhe, reco_hf, towermaker, dumper, dumper_ct, out}

}
